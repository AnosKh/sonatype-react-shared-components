/*
 * Copyright (c) 2019-present Sonatype, Inc.
 * This program and the accompanying materials are made available under
 * the terms of the Eclipse Public License 2.0 which accompanies this
 * distribution and is available at https://www.eclipse.org/legal/epl-2.0/.
 */
import React from 'react';

import { GalleryDescriptionTile, GalleryExampleTile, GalleryTile } from '../../gallery-components/GalleryTiles';
import CodeExample from '../../CodeExample';
import NxVulnerabilityDetailsExample from './NxVulnerabilityDetailsExample';
import NxVulnerabilityDetailsThirdPartyScanExample from './NxVulnerabilityDetailsThirdPartyScanExample';

const exampleSourceCode = require('!!raw-loader!./NxVulnerabilityDetailsExample').default;
const vulnerabilityDetailsJson = require('../../resources/vulnerabilities/vulnerabilityDetailsJson.json');
const exampleSourceForThirdPartyScans = require('!!raw-loader!./NxVulnerabilityDetailsThirdPartyScanExample').default;
const thirdPartyScanVulnerabilityJson =
  require('../../resources/vulnerabilities/thirdPartyScanVulnerabilityDetails.json');

const NxVulnerabilityDetailsPage = () =>
  <>
    <GalleryDescriptionTile>
      <p>Renders vulnerability details from vulnerabilityDetails JSON</p>
      <p>Props:</p>
      <table className="gallery-props-table">
        <thead>
          <tr>
            <th>Prop</th>
            <th>Type</th>
            <th>Required</th>
            <th>Details</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>vulnerabilityDetails</td>
            <td>Object</td>
            <td>Yes</td>
            <td>
              see <code className="nx-code">VulnerabilityDetails</code> interface
              and <code className="nx-code">vulnerabilityDetailsJson</code> example below
            </td>
          </tr>
        </tbody>
      </table>
      <p>
        Note that markdown fields in <code className="nx-code">vulnerabilityDetails</code> JSON are expected to use{' '}
        <a className="nx-text-link"
           target="_blank"
           rel="noreferrer"
           href="https://spec.commonmark.org/">
          CommonMark
        </a> flavored markdown.
        <br/>Also, in addition to CommonMark spec, a "soft break" is supported: a new line within a paragraph will be
        converted to <code className="nx-code">&lt;br&gt;</code> tag.
      </p>
    </GalleryDescriptionTile>
    <GalleryExampleTile>
      <NxVulnerabilityDetailsExample />
      <CodeExample content={exampleSourceCode} />
    </GalleryExampleTile>
    <GalleryTile title='vulnerabilityDetailsJson'>
      <CodeExample content={JSON.stringify(vulnerabilityDetailsJson, null, 2)} />
    </GalleryTile>
    <GalleryTile title="Representative example of vulnerability data from third party scans">
      <NxVulnerabilityDetailsThirdPartyScanExample/>
      <CodeExample content={exampleSourceForThirdPartyScans}/>
    </GalleryTile>
    <GalleryTile title='thirdPartyScanVulnerabilityDetails.json'>
      <CodeExample content={JSON.stringify(thirdPartyScanVulnerabilityJson, null, 2)}/>
    </GalleryTile>
  </>;

export default NxVulnerabilityDetailsPage;
