/*
 * Copyright (c) 2019-present Sonatype, Inc.
 * This program and the accompanying materials are made available under
 * the terms of the Eclipse Public License 2.0 which accompanies this
 * distribution and is available at https://www.eclipse.org/legal/epl-2.0/.
 */
import { getShallowComponent } from '../../../__testutils__/enzymeUtils';

import CategoriesDetail, { Props } from '../details/CategoriesDetail';

describe('CategoriesDetail', function() {
  const props: Props = {};
  const getShallow = getShallowComponent<Props>(CategoriesDetail, props);

  it('renders nothing if categories prop is not provided', function () {
    expect(getShallow()).toBeEmptyRender();
  });

  it('renders nothing categories is empty', function () {
    const shallowRender = getShallow({
      categories: []
    });
    expect(shallowRender).toBeEmptyRender();
  });

  it('renders categories using Capitalized case', function () {
    const shallowRender = getShallow({
      categories: ['configuration', 'privileged']
    });

    expect(shallowRender).toContainExactlyOneMatchingElement('RenderDetail');
    expect(shallowRender.find('RenderDetail')).toHaveProp('title', 'Categories');
    expect(shallowRender.find('RenderDetail').children().length).toBe(1);
    const list = shallowRender.find('RenderDetail').find('ul.nx-list--unstyled');
    expect(list.children().length).toBe(2);
    expect(list.childAt(0)).toHaveDisplayName('li');
    expect(list.childAt(0)).toHaveText('Configuration');
    expect(list.childAt(1)).toHaveDisplayName('li');
    expect(list.childAt(1)).toHaveText('Privileged');
  });
});
