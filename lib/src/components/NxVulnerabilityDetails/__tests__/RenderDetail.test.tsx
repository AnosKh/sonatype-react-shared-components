/*
 * Copyright (c) 2019-present Sonatype, Inc.
 * This program and the accompanying materials are made available under
 * the terms of the Eclipse Public License 2.0 which accompanies this
 * distribution and is available at https://www.eclipse.org/legal/epl-2.0/.
 */
import React from 'react';
import { getShallowComponent } from '../../../__testutils__/enzymeUtils';

import RenderDetail, {Props} from '../details/RenderDetail';

describe('RenderDetail', function() {
  const simpleProps: Props = {
    title: 'Title',
    children: <div>foo</div>
  };

  const getShallow = getShallowComponent<Props>(RenderDetail, simpleProps);

  it('renders a <section> with <header> and provided children', function() {
    expect(getShallow().find('section')).toHaveClassName('nx-vulnerability-details__section');
    expect(getShallow().find('section').childAt(0)).toHaveDisplayName('header');
    expect(getShallow().find('section').childAt(0)).toHaveText('Title');
    expect(getShallow().find('section').childAt(1)).toHaveClassName('nx-vulnerability-details__section-content');
    expect(getShallow().find('section').childAt(1).children()).toHaveHTML('<div>foo</div>');
  });

  it('renders nothing if children are not provided', function() {
    const shallowRender = getShallow({
      children: undefined
    });

    expect(shallowRender).toBeEmptyRender();
  });
  it('renders nothing if children are empty array', function() {
    const shallowRender = getShallow({
      children: []
    });

    expect(shallowRender).toBeEmptyRender();
  });
});
