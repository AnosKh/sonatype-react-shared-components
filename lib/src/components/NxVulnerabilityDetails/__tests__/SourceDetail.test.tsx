/*
 * Copyright (c) 2019-present Sonatype, Inc.
 * This program and the accompanying materials are made available under
 * the terms of the Eclipse Public License 2.0 which accompanies this
 * distribution and is available at https://www.eclipse.org/legal/epl-2.0/.
 */
import React from 'react';
import { getShallowComponent } from '../../../__testutils__/enzymeUtils';

import SourceDetail, { Props } from '../details/SourceDetail';
import RenderDetail from '../details/RenderDetail';

describe('SourceDetail', function() {
  const simpleProps: Props = {};

  const getShallow = getShallowComponent<Props>(SourceDetail, simpleProps);

  it('renders nothing if source is not provided', function() {
    expect(getShallow()).toBeEmptyRender();
  });

  it('renders empty <RenderDetail> if source longName is not provided', function() {

    const shallowRender = getShallow({
      source: {
        shortName: 'CVE'
      }
    });
    expect(shallowRender).toContainReact(<RenderDetail title="Source" />);
  });

  it('properly renders source using longName', function () {
    const shallowRender = getShallow({
      source: {
        shortName: 'CVE',
        longName: 'National Vulnerability Database'
      }
    });

    expect(shallowRender).toContainExactlyOneMatchingElement('RenderDetail');
    expect(shallowRender.find('RenderDetail')).toHaveProp('title', 'Source');
    expect(shallowRender.find('RenderDetail').childAt(0)).toHaveText('National Vulnerability Database');
  });
});
